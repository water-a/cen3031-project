(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/logo.dac70980.png"},26:function(e,t,a){e.exports=a(41)},31:function(e,t,a){},32:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),s=a.n(l),c=(a(31),a(11)),i=a(10),o=a(5),m=a(6),u=a(8),d=a(7),h=a(9),p=a(13),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e)))._getStatusText=function(e){switch(e){case 2:return"Order completed";case 1:return"Paid";default:return"Pending payment"}},a._toggleOrderStatus=function(e,t){t.preventDefault(),fetch("/api/orders/".concat(e.id),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({status:1===e.status?2:1})}).then(a._fetchOrders.bind(Object(p.a)(Object(p.a)(a))))},a.state={orders:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._fetchOrders()}},{key:"_fetchOrders",value:function(){var e=this;fetch("/api/orders").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({orders:t})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h2",{className:"card-title"},"Orders List")),r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Order ID"),r.a.createElement("th",null,"Preview"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Material"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Contact"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,0===this.state.orders.length?r.a.createElement("tr",null,r.a.createElement("td",null,"No orders available")):this.state.orders.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement("img",{style:{maxHeight:"60px"},alt:"Preview",src:"/api/orders/".concat(t.id,"/preview")})),r.a.createElement("td",null,e._getStatusText(t.status)),r.a.createElement("td",null,t.material.name),r.a.createElement("td",null,"".concat(t.size.height,"x").concat(t.size.width)),r.a.createElement("td",null,t.contact?r.a.createElement(r.a.Fragment,null,t.contact.firstName+" "+t.contact.lastName,r.a.createElement("br",null),t.contact.email):"Not available"),r.a.createElement("td",null,t.shippingAddress?r.a.createElement(r.a.Fragment,null,t.shippingAddress.line1,r.a.createElement("br",null),t.shippingAddress.line2&&r.a.createElement(r.a.Fragment,null,t.shippingAddress.line2,r.a.createElement("br",null)),t.shippingAddress.city,", ",t.shippingAddress.country," ",t.shippingAddress.postal):"Not available"),r.a.createElement("td",null,r.a.createElement("a",{href:"/api/orders/".concat(t.id,"/preview?download")},"Download"),t.status>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("a",{href:"#toggle",onClick:e._toggleOrderStatus.bind(e,t)},"Mark ",(1===t.status?"":"not ")+"completed"))))})))))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={messages:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/contact").then(function(e){return e.json()}).then(function(t){"success"===t.status&&e.setState({messages:t.response})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h2",{className:"card-title"},"Messages")),r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Order Id"),r.a.createElement("th",null,"Message"),r.a.createElement("th",null,"Timestamp"))),r.a.createElement("tbody",null,0===this.state.messages.length?r.a.createElement("tr",null,r.a.createElement("td",null,"No messages available")):this.state.messages.map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.orderId.length?e.orderId:"Not available"),r.a.createElement("td",null,e.issue),r.a.createElement("td",null,e.createdAt))})))))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={items:a.props.items},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({items:e.items})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:this.props.style,className:"Items"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("h3",{style:{margin:0}},this.props.title),r.a.createElement("button",{style:{width:"100px",fontSize:"1rem",margin:"auto",marginRight:"0"},className:"btn btn-success btn-block",onClick:this.props.add},"Add")),r.a.createElement("hr",null),r.a.createElement("div",{style:{height:"200px",overflowY:"auto"}},this.state.items.length>0?this.state.items.map(function(t,a){return r.a.createElement("li",{key:a,style:{display:"flex",flexDirection:"row",marginBottom:"10px"}},e.props.render?e.props.render(t,a):r.a.createElement("span",{style:{margin:0}},t),r.a.createElement("button",{style:{width:"100px",fontSize:"1rem",margin:"auto",marginRight:"0"},className:"btn btn-danger btn-block",onClick:e.props.delete.bind(e,t,a)},"Delete"))}):r.a.createElement("span",null,"No items available")))}}]),t}(n.Component),g=a(21),y=a.n(g),v=a(22),N=a.n(v)()(y.a),x=N.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateContent=function(e){fetch("/api/options/content/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:a.refs[e].value})}).then(function(){x.fire({type:"success",title:"Sucessfully updated ".concat(e,"!")}),a.refresh()})},a.state={about:"",faq:"",materials:[],sizes:[],max:{height:0,width:0}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;fetch("/api/options").then(function(e){return e.json()}).then(function(t){var a=t.response;e.setState({about:a.content.about,faq:a.content.faq,materials:a.materials,sizes:a.sizes,max:a.maxSize}),e.refs.maxHeight.value=e.state.max.height,e.refs.maxWidth.value=e.state.max.width,e.refs.about.value=e.state.about,e.refs.faq.value=e.state.faq})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h2",{className:"card-title"},"Settings")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,"General"),r.a.createElement("section",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(b,{style:{width:"30%"},title:"Materials",items:this.state.materials,render:function(e){return r.a.createElement("span",null,e.name," - ",e.costPerArea,"/in",r.a.createElement("sup",null,"2"))},add:function(){N.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue(["What kind of material do you want to add?","What is the cost per area?"]).then(function(t){if(t.value){var a=t.value,n=a[0],r=a[1];fetch("/api/options/materials/".concat(n),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({costPerArea:r})}).then(function(e){return e.json()}).then(function(t){"success"===t.status?(x.fire({type:"success",title:"Added successfully!"}),e.refresh()):N.fire("Error",t.message,"error")})}})},delete:function(t){fetch("/api/options/materials/".concat(t._id),{method:"DELETE"}).then(function(e){return e.json()}).then(function(t){"success"===t.status?(x.fire({type:"success",title:"Deleted successfully!"}),e.refresh()):N.fire("Error",t.message,"error")})}}),r.a.createElement(b,{style:{width:"30%"},title:"Sizes",items:this.state.sizes,render:function(e){return r.a.createElement("span",null,e.height,"x",e.width)},add:function(){N.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue(["What is the height?","What is the width?"]).then(function(t){if(t.value){var a=t.value,n=a[0],r=a[1];fetch("/api/options/sizes/".concat(n,"/").concat(r),{method:"POST"}).then(function(e){return e.json()}).then(function(t){"success"===t.status?(x.fire({type:"success",title:"Added successfully!"}),e.refresh()):N.fire("Error",t.message,"error")})}})},delete:function(t){fetch("/api/options/sizes/".concat(t.height,"/").concat(t.width),{method:"DELETE"}).then(function(e){return e.json()}).then(function(t){"success"===t.status?(x.fire({type:"success",title:"Deleted successfully!"}),e.refresh()):N.fire("Error",t.message,"error")})}}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("/api/options/sizes/max",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({height:e.refs.maxHeight.value,width:e.refs.maxWidth.value})}).then(function(){x.fire({type:"success",title:"Successfully updated!"}),e.refresh()})},style:{width:"30%"}},r.a.createElement("h3",{style:{margin:0}},"Maximum height and width"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Height"),r.a.createElement("input",{type:"number",ref:"maxHeight",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Width"),r.a.createElement("input",{type:"number",ref:"maxWidth",className:"form-control"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Update"))),r.a.createElement("h3",null,"Content"),r.a.createElement("section",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"About"),r.a.createElement("textarea",{ref:"about",style:{minHeight:"200px"},className:"form-control"})),r.a.createElement("button",{onClick:this.updateContent.bind(this,"about"),className:"btn btn-primary btn-block"},"Update About"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"FAQ"),r.a.createElement("textarea",{ref:"faq",style:{minHeight:"200px"},className:"form-control"})),r.a.createElement("button",{onClick:this.updateContent.bind(this,"faq"),className:"btn btn-primary btn-block"},"Update FAQ"))))}}]),t}(n.Component),O=a(23),j=a.n(O),S=(a(32),function(e){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"logo"},r.a.createElement(c.b,{to:"/dashboard",className:"simple-text logo-normal"},r.a.createElement("img",{alt:"Petree's Prints",height:"35",width:"35",src:j.a}),"Petree's Prints")),r.a.createElement("div",{className:"sidebar-wrapper"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(c.b,{to:"/dashboard"},r.a.createElement("i",{className:"now-ui-icons design_bullet-list-67"}),"Orders")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/dashboard/messages"},r.a.createElement("i",{className:"now-ui-icons ui-2_chat-round"}),"Messages")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/dashboard/settings"},r.a.createElement("i",{className:"now-ui-icons loader_gear"}),"Settings"))))),r.a.createElement("div",{className:"main-panel"},r.a.createElement("div",{className:"content"},r.a.createElement(i.a,{exact:!0,path:e.match.path,component:f}),r.a.createElement(i.a,{exact:!0,path:"".concat(e.match.path,"messages"),component:E}),r.a.createElement(i.a,{exact:!0,path:"".concat(e.match.path,"settings"),component:w}))))}),k=function(){return r.a.createElement(c.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/dashboard/",component:S})))};s.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.dd19614d.chunk.js.map